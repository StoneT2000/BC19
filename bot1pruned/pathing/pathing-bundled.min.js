function initializePlanner(r){new Date;for(var t=r.map,a=r.map[0].length,e=r.map.length,s=new Int8Array(a*e),n=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],i=0;i<e;i++)for(var o=0;o<a;o++){var h=o+i*a;if(!1===t[i][o]){for(var u=0,f=[],c=0;c<n.length;c++){var l=n[c],p=i+l[1],g=o+l[0];if(g<0||p<0||g>=t[0].length||p>=t.length)f.push(!0);else{!1===t[i+l[1]][o+l[0]]?(u+=1,f.push(!1)):f.push(!0)}}s[h]=u<=2?0:1}}new Date;var d=ndarray(s,[a,e]),y=createPlanner(d);r.planner=y}!function(){function r(t,a,e){function s(i,o){if(!a[i]){if(!t[i]){var h="function"==typeof require&&require;if(!o&&h)return h(i,!0);if(n)return n(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var f=a[i]={exports:{}};t[i][0].call(f.exports,function(r){return s(t[i][1][r]||r)},f,f.exports,r,t,a,e)}return a[i].exports}for(var n="function"==typeof require&&require,i=0;i<e.length;i++)s(e[i]);return s}return r}()({1:[function(r,t,a){"use strict";function e(r,t,a,e,s,n){var i=["function ",r,"(a,l,h,",e.join(","),"){",n?"":"var i=",a?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",s?".get(m)":"[m]"];return n?t.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",t,"){i=m;"),a?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),n?i.push("return -1};"):i.push("return i};"),i.join("")}function s(r,t,a,s){return new Function([e("A","x"+r+"y",t,["y"],!1,s),e("B","x"+r+"y",t,["y"],!0,s),e("P","c(x,y)"+r+"0",t,["y","c"],!1,s),e("Q","c(x,y)"+r+"0",t,["y","c"],!0,s),"function dispatchBsearch",a,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",a].join(""))()}t.exports={ge:s(">=",!1,"GE"),gt:s(">",!1,"GT"),lt:s("<",!0,"LT"),le:s("<=",!0,"LE"),eq:s("-",!0,"EQ",!0)}},{}],2:[function(r,t,a){"use strict";function e(r,t,a,e){this.start=r,this.end=t,this.direction=a,this.height=e,this.visited=!1,this.next=null,this.prev=null}function s(r,t,a,e){this.x=r,this.y=t,this.segment=a,this.orientation=e}function n(r,t){var a=r.shape[0],s=r.shape[1],n=[],i=!1,o=!1,h=!1,u=!1,f=0,c=0,l=0;for(l=0;l<s;++l)(o=!!r.get(0,l))!==i&&(i&&n.push(new e(f,l,t,0)),o&&(f=l),i=o);for(i&&n.push(new e(f,l,t,0)),c=1;c<a;++c){for(i=!1,o=!1,f=0,l=0;l<s;++l)h=!!r.get(c-1,l),u=!!r.get(c,l),h===i&&u===o||(i!==o&&(i?n.push(new e(l,f,t,c)):n.push(new e(f,l,t,c))),h!==u&&(f=l),i=h,o=u);i!==o&&(i?n.push(new e(l,f,t,c)):n.push(new e(f,l,t,c)))}for(i=!1,f=0,l=0;l<s;++l)(o=!!r.get(a-1,l))!==i&&(i&&n.push(new e(l,f,t,a)),o&&(f=l),i=o);return i&&n.push(new e(l,f,t,a)),n}function i(r){for(var t=new Array(2*r.length),a=0;a<r.length;++a){var e=r[a];0===e.direction?(t[2*a]=new s(e.start,e.height,e,0),t[2*a+1]=new s(e.end,e.height,e,1)):(t[2*a]=new s(e.height,e.start,e,0),t[2*a+1]=new s(e.height,e.end,e,1))}return t}function o(r,t){for(var a=[];!r.visited;)r.visited=!0,r.direction?a.push([r.height,r.end]):a.push([r.start,r.height]),r=t?r.next:r.prev;return a}function h(r,t){var a=r.x-t.x;return a||((a=r.y-t.y)||r.orientation-t.orientation)}t.exports=function(r,t){t=!!t;var a=n(r,0),e=i(a);e.sort(h);var s=i(n(r.transpose(1,0),1));s.sort(h);for(var u=e.length,f=0;f<u;++f){var c=e[f],l=s[f];c.orientation?(c.segment.next=l.segment,l.segment.prev=c.segment):(c.segment.prev=l.segment,l.segment.next=c.segment)}var p=[];for(f=0;f<a.length;++f)(c=a[f]).visited||p.push(o(c,t));return p}},{}],3:[function(r,t,a){"use strict";var e=r("./lib/thunk.js");t.exports=function(r){var t=new function(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1};t.pre=r.pre,t.body=r.body,t.post=r.post;var a=r.args.slice(0);t.argTypes=a;for(var s=0;s<a.length;++s){var n=a[s];if("array"===n||"object"==typeof n&&n.blockIndices){if(t.argTypes[s]="array",t.arrayArgs.push(s),t.arrayBlockIndices.push(n.blockIndices?n.blockIndices:0),t.shimArgs.push("array"+s),s<t.pre.args.length&&t.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array args");if(s<t.post.args.length&&t.post.args[s].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===n)t.scalarArgs.push(s),t.shimArgs.push("scalar"+s);else if("index"===n){if(t.indexArgs.push(s),s<t.pre.args.length&&t.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array index");if(s<t.body.args.length&&t.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array index");if(s<t.post.args.length&&t.post.args[s].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===n){if(t.shapeArgs.push(s),s<t.pre.args.length&&t.pre.args[s].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(s<t.body.args.length&&t.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array shape");if(s<t.post.args.length&&t.post.args[s].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof n||!n.offset)throw new Error("cwise: Unknown argument type "+a[s]);t.argTypes[s]="offset",t.offsetArgs.push({array:n.array,offset:n.offset}),t.offsetArgIndex.push(s)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>a.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>a.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>a.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!r.printCode||!!r.debug,t.funcName=r.funcName||"cwise",t.blockSize=r.blockSize||64,e(t)}},{"./lib/thunk.js":5}],4:[function(r,t,a){"use strict";function e(r,t,a){var e,s,n=r.length,i=t.arrayArgs.length,o=t.indexArgs.length>0,h=[],u=[],f=0,c=0;for(e=0;e<n;++e)u.push(["i",e,"=0"].join(""));for(s=0;s<i;++s)for(e=0;e<n;++e)c=f,f=r[e],0===e?u.push(["d",s,"s",e,"=t",s,"p",f].join("")):u.push(["d",s,"s",e,"=(t",s,"p",f,"-s",c,"*t",s,"p",c,")"].join(""));for(u.length>0&&h.push("var "+u.join(",")),e=n-1;e>=0;--e)f=r[e],h.push(["for(i",e,"=0;i",e,"<s",f,";++i",e,"){"].join(""));for(h.push(a),e=0;e<n;++e){for(c=f,f=r[e],s=0;s<i;++s)h.push(["p",s,"+=d",s,"s",e].join(""));o&&(e>0&&h.push(["index[",c,"]-=s",c].join("")),h.push(["++index[",f,"]"].join(""))),h.push("}")}return h.join("\n")}function s(r,t,a){for(var e=r.body,s=[],n=[],i=0;i<r.args.length;++i){var o=r.args[i];if(!(o.count<=0)){var h=new RegExp(o.name,"g"),u="",f=t.arrayArgs.indexOf(i);switch(t.argTypes[i]){case"offset":var c=t.offsetArgIndex.indexOf(i);f=t.offsetArgs[c].array,u="+q"+c;case"array":u="p"+f+u;var l="l"+i,p="a"+f;if(0===t.arrayBlockIndices[f])1===o.count?"generic"===a[f]?o.lvalue?(s.push(["var ",l,"=",p,".get(",u,")"].join("")),e=e.replace(h,l),n.push([p,".set(",u,",",l,")"].join(""))):e=e.replace(h,[p,".get(",u,")"].join("")):e=e.replace(h,[p,"[",u,"]"].join("")):"generic"===a[f]?(s.push(["var ",l,"=",p,".get(",u,")"].join("")),e=e.replace(h,l),o.lvalue&&n.push([p,".set(",u,",",l,")"].join(""))):(s.push(["var ",l,"=",p,"[",u,"]"].join("")),e=e.replace(h,l),o.lvalue&&n.push([p,"[",u,"]=",l].join("")));else{for(var g=[o.name],d=[u],y=0;y<Math.abs(t.arrayBlockIndices[f]);y++)g.push("\\s*\\[([^\\]]+)\\]"),d.push("$"+(y+1)+"*t"+f+"b"+y);if(h=new RegExp(g.join(""),"g"),u=d.join("+"),"generic"===a[f])throw new Error("cwise: Generic arrays not supported in combination with blocks!");e=e.replace(h,[p,"[",u,"]"].join(""))}break;case"scalar":e=e.replace(h,"Y"+t.scalarArgs.indexOf(i));break;case"index":e=e.replace(h,"index");break;case"shape":e=e.replace(h,"shape")}}}return[s.join("\n"),e,n.join("\n")].join("\n").trim()}var n=r("uniq");t.exports=function(r,t){for(var a=t[1].length-Math.abs(r.arrayBlockIndices[0])|0,i=new Array(r.arrayArgs.length),o=new Array(r.arrayArgs.length),h=0;h<r.arrayArgs.length;++h)o[h]=t[2*h],i[h]=t[2*h+1];var u=[],f=[],c=[],l=[],p=[];for(h=0;h<r.arrayArgs.length;++h){r.arrayBlockIndices[h]<0?(c.push(0),l.push(a),u.push(a),f.push(a+r.arrayBlockIndices[h])):(c.push(r.arrayBlockIndices[h]),l.push(r.arrayBlockIndices[h]+a),u.push(0),f.push(r.arrayBlockIndices[h]));for(var g=[],d=0;d<i[h].length;d++)c[h]<=i[h][d]&&i[h][d]<l[h]&&g.push(i[h][d]-c[h]);p.push(g)}var y=["SS"],v=["'use strict'"],b=[];for(d=0;d<a;++d)b.push(["s",d,"=SS[",d,"]"].join(""));for(h=0;h<r.arrayArgs.length;++h){for(y.push("a"+h),y.push("t"+h),y.push("p"+h),d=0;d<a;++d)b.push(["t",h,"p",d,"=t",h,"[",c[h]+d,"]"].join(""));for(d=0;d<Math.abs(r.arrayBlockIndices[h]);++d)b.push(["t",h,"b",d,"=t",h,"[",u[h]+d,"]"].join(""))}for(h=0;h<r.scalarArgs.length;++h)y.push("Y"+h);if(r.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),r.indexArgs.length>0){var _=new Array(a);for(h=0;h<a;++h)_[h]="0";b.push(["index=[",_.join(","),"]"].join(""))}for(h=0;h<r.offsetArgs.length;++h){var m=r.offsetArgs[h],w=[];for(d=0;d<m.offset.length;++d)0!==m.offset[d]&&(1===m.offset[d]?w.push(["t",m.array,"p",d].join("")):w.push([m.offset[d],"*t",m.array,"p",d].join("")));0===w.length?b.push("q"+h+"=0"):b.push(["q",h,"=",w.join("+")].join(""))}var j=n([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));for((b=b.concat(j)).length>0&&v.push("var "+b.join(",")),h=0;h<r.arrayArgs.length;++h)v.push("p"+h+"|=0");r.pre.body.length>3&&v.push(s(r.pre,r,o));var x=s(r.body,r,o),V=function(r){for(var t=0,a=r[0].length;t<a;){for(var e=1;e<r.length;++e)if(r[e][t]!==r[0][t])return t;++t}return t}(p);V<a?v.push(function(r,t,a,s){for(var n=t.length,i=a.arrayArgs.length,o=a.blockSize,h=a.indexArgs.length>0,u=[],f=0;f<i;++f)u.push(["var offset",f,"=p",f].join(""));for(f=r;f<n;++f)u.push(["for(var j"+f+"=SS[",t[f],"]|0;j",f,">0;){"].join("")),u.push(["if(j",f,"<",o,"){"].join("")),u.push(["s",t[f],"=j",f].join("")),u.push(["j",f,"=0"].join("")),u.push(["}else{s",t[f],"=",o].join("")),u.push(["j",f,"-=",o,"}"].join("")),h&&u.push(["index[",t[f],"]=j",f].join(""));for(f=0;f<i;++f){for(var c=["offset"+f],l=r;l<n;++l)c.push(["j",l,"*t",f,"p",t[l]].join(""));u.push(["p",f,"=(",c.join("+"),")"].join(""))}for(u.push(e(t,a,s)),f=r;f<n;++f)u.push("}");return u.join("\n")}(V,p[0],r,x)):v.push(e(p[0],r,x)),r.post.body.length>3&&v.push(s(r.post,r,o)),r.debug&&console.log("-----Generated cwise routine for ",t,":\n"+v.join("\n")+"\n----------");var A=[r.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",V,function(r){for(var t=new Array(r.length),a=!0,e=0;e<r.length;++e){var s=r[e],n=s.match(/\d+/);n=n?n[0]:"",0===s.charAt(0)?t[e]="u"+s.charAt(1)+n:t[e]=s.charAt(0)+n,e>0&&(a=a&&t[e]===t[e-1])}return a?t[0]:t.join("")}(o)].join("");return new Function(["function ",A,"(",y.join(","),"){",v.join("\n"),"} return ",A].join(""))()}},{uniq:21}],5:[function(r,t,a){"use strict";var e=r("./compile.js");t.exports=function(r){var t=["'use strict'","var CACHED={}"],a=[],s=r.funcName+"_cwise_thunk";t.push(["return function ",s,"(",r.shimArgs.join(","),"){"].join(""));for(var n=[],i=[],o=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],h=[],u=[],f=0;f<r.arrayArgs.length;++f){var c=r.arrayArgs[f];a.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),n.push("t"+c),n.push("r"+c),i.push("t"+c),i.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),f>0&&(h.push("array"+r.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[f]))),u.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[f])+"]"))}for(r.arrayArgs.length>1&&(t.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),f=0;f<r.scalarArgs.length;++f)o.push("scalar"+r.scalarArgs[f]);return a.push(["type=[",i.join(","),"].join()"].join("")),a.push("proc=CACHED[type]"),t.push("var "+a.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",n.join(","),"])}","return proc(",o.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(e.bind(void 0,r))}},{"./compile.js":4}],6:[function(r,t,a){"use strict";t.exports=function(r){for(var t=new Array(r),a=0;a<r;++a)t[a]=a;return t}},{}],7:[function(r,t,a){function e(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}t.exports=function(r){return null!=r&&(e(r)||function(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&e(r.slice(0,0))}(r)||!!r._isBuffer)}},{}],8:[function(r,t,a){"use strict";function e(r,t){this.corners=r,this.grid=t}function s(r,t){var a=r[0]-t[0];return a||r[1]-t[1]}var n=r("ndarray"),i=r("uniq"),o=r("ndarray-ops"),h=r("ndarray-prefix-sum"),u=r("contour-2d"),f=r("robust-orientation")[3];t.exports=function(r){for(var t=u(r.transpose(1,0)),a=[],c=0;c<t.length;++c)for(var l=t[c],p=0;p<l.length;++p){var g=l[(p+l.length-1)%l.length],d=l[p],y=l[(p+1)%l.length];if(f(g,d,y)>0){for(var v=[0,0],b=0;b<2;++b)d[b]-g[b]?v[b]=d[b]-g[b]:v[b]=d[b]-y[b],v[b]=d[b]+Math.min(0|Math.round(v[b]/Math.abs(v[b])),0);v[0]>=0&&v[0]<r.shape[0]&&v[1]>=0&&v[1]<r.shape[1]&&0===r.get(v[0],v[1])&&a.push(v)}}i(a,s);var _=n(new Int32Array(r.shape[0]*r.shape[1]),r.shape);return o.gts(_,r,0),h(_),new e(a,_)};var c=e.prototype;c.stabRay=function(r,t,a){return this.stabBox(r,t,a,t)},c.stabTile=function(r,t){return this.stabBox(r,t,r,t)},c.integrate=function(r,t){return r<0||t<0?0:this.grid.get(0|Math.min(r,this.grid.shape[0]-1),0|Math.min(t,this.grid.shape[1]-1))},c.stabBox=function(r,t,a,e){var s=Math.min(r,a),n=Math.min(t,e),i=Math.max(r,a),o=Math.max(t,e);return this.integrate(s-1,n-1)-this.integrate(s-1,o)-this.integrate(i,n-1)+this.integrate(i,o)>0}},{"contour-2d":2,ndarray:14,"ndarray-ops":12,"ndarray-prefix-sum":13,"robust-orientation":15,uniq:21}],9:[function(r,t,a){"use strict";function e(r,t,a,e){for(var s=+e.x,n=+e.y,i=Math.abs(s-t)+Math.abs(n-a),o=e.landmark,u=0;u<h;++u)i=Math.max(i,r[u]-o[u]);return 1.0000009536743164*i}function s(){this.target=i.create(0,0),this.verts=[],this.freeList=this.target,this.toVisit=o,this.lastS=null,this.lastT=null,this.srcX=0,this.srcY=0,this.dstX=0,this.dstY=0,this.landmarks=[],this.landmarkDist=u.slice()}function n(r,t){var a=r.x-t.x;return a||r.y-t.y}t.exports=s;var i=r("./vertex"),o=i.NIL,h=i.NUM_LANDMARKS,u=i.LANDMARK_DIST,f=s.prototype;f.vertex=function(r,t){var a=i.create(r,t);return this.verts.push(a),a},f.link=function(r,t){i.link(r,t)},f.setSourceAndTarget=function(r,t,a,e){this.srcX=0|r,this.srcY=0|t,this.dstX=0|a,this.dstY=0|e},f.addS=function(r){0==(2&r.state)&&(r.heuristic=e(this.landmarkDist,this.dstX,this.dstY,r),r.weight=Math.abs(this.srcX-r.x)+Math.abs(this.srcY-r.y)+r.heuristic,r.state|=2,r.pred=null,this.toVisit=i.push(this.toVisit,r),this.freeList=i.insert(this.freeList,r),this.lastS=r)},f.addT=function(r){if(0==(1&r.state)){r.state|=1,this.freeList=i.insert(this.freeList,r),this.lastT=r;for(var t=Math.abs(r.x-this.dstX)+Math.abs(r.y-this.dstY),a=r.landmark,e=this.landmarkDist,s=0;s<h;++s)e[s]=Math.min(e[s],a[s]+t)}},f.getPath=function(r){var t=this.dstX,a=this.dstY;r.push(t,a);for(var e=this.target.pred;e;)t!==e.x&&a!==e.y&&r.push(e.x,a),t===e.x&&a===e.y||r.push(e.x,e.y),t=e.x,a=e.y,e=e.pred;return t!==this.srcX&&a!==this.srcY&&r.push(this.srcX,a),t===this.srcX&&a===this.srcY||r.push(this.srcX,this.srcY),r},f.findComponents=function(){for(var r=this.verts,t=r.length,a=0;a<t;++a)r[a].component=-1;var e=[];for(a=0;a<t;++a){var s=r[a];if(!(s.component>=0)){var n=e.length;s.component=n;for(var i=[s],o=0;o<i.length;)for(var h=i[o++].edges,u=0;u<h.length;++u){var f=h[u];f.component>=0||(f.component=n,i.push(f))}e.push(i)}}return e},f.findLandmarks=function(r){r.sort(n);for(var t=r[r.length>>>1],a=0;a<h;++a){t.weight=0,this.landmarks.push(t);for(var e=t;e!==o;){(t=e).state=2,e=i.pop(e);for(var s=t.weight,u=t.edges,f=0;f<u.length;++f){if(2!==(p=u[f]).state){var c=s+Math.abs(t.x-p.x)+Math.abs(t.y-p.y);0===p.state?(p.state=1,p.weight=c,e=i.push(e,p)):c<p.weight&&(p.weight=c,e=i.decreaseKey(e,p))}}}var l=0;for(f=0;f<r.length;++f){var p;(p=r[f]).state=0,p.landmark[a]=p.weight;for(var g=1/0,d=0;d<=a;++d)g=Math.min(g,p.landmark[d]);g>l&&(t=p,l=g)}}},f.init=function(){for(var r=this.findComponents(),t=0;t<r.length;++t)this.findLandmarks(r[t])},f.search=function(){var r=this.target,t=this.freeList,a=this.landmarkDist,s=1/0;if(this.lastS&&this.lastT&&this.lastS.component===this.lastT.component){this.srcX,this.srcY;for(var n=+this.dstX,u=+this.dstY,f=this.toVisit;f!==o;){var c=f,l=+c.x,p=+c.y,g=Math.floor(c.weight-c.heuristic);if(3===c.state){s=g+Math.abs(n-l)+Math.abs(u-p),r.pred=c;break}c.state=4,f=i.pop(f);for(var d=c.edges,y=d.length,v=0;v<y;++v){var b=d[v],_=b.state;if(4!==_){var m=g+Math.abs(l-b.x)+Math.abs(p-b.y);if(_<2){var w=e(a,n,u,b);b.state|=2,b.heuristic=w,b.weight=w+m,b.pred=c,f=i.push(f,b),t=i.insert(t,b)}else{var j=m+b.heuristic;j<b.weight&&(b.weight=j,b.pred=c,f=i.decreaseKey(f,b))}}}}}i.clear(t),this.freeList=r,this.toVisit=o,this.lastS=this.lastT=null;for(v=0;v<h;++v)a[v]=1/0;return s}},{"./vertex":11}],10:[function(r,t,a){"use strict";function e(r,t,a,e,s,n,i){this.y0=r,this.y1=t,this.top=a,this.bottom=e,this.left=s,this.right=n,this.on=i}function s(r,t,a){this.geometry=r,this.graph=t,this.root=a}function n(r,t){return r.y0-t}function i(r,t,a,e,s,n){for(var i=0;i<r.length;++i){var o=r[i];t.stabBox(o.x,o.y,s,n)||(e?a.addT(o):a.addS(o))}}function o(r,t,a,e,s,o){for(;a;){if(a.leaf){for(var h=a.verts,f=h.length,c=0;c<f;++c){var l=h[c];r.stabBox(l.x,l.y,s,o)||(e?t.addT(l):t.addS(l))}break}var p=a.buckets,g=u.lt(p,o,n);if(g>=0){var d=p[g];if(o<d.y1)a.x>=s&&i(d.right,r,t,e,s,o),a.x<=s&&i(d.left,r,t,e,s,o),i(d.on,r,t,e,s,o);else{if((l=p[g].bottom)&&!r.stabBox(l.x,l.y,s,o)&&(e?t.addT(l):t.addS(l)),g+1<p.length){(l=p[g+1].top)&&!r.stabBox(l.x,l.y,s,o)&&(e?t.addT(l):t.addS(l))}}}else{(l=p[0].top)&&!r.stabBox(l.x,l.y,s,o)&&(e?t.addT(l):t.addS(l))}if(a.x>s)a=a.left;else{if(!(a.x<s))break;a=a.right}}}function h(r,t){var a=r[1]-t[1];return a||r[0]-t[0]}var u=r("binary-search-bounds"),f=r("./geometry"),c=r("./graph"),l=64,p=32;t.exports=function(r){function t(r){if(!r)return null;var t=u[r];return t||(u[r]=o.vertex(r[0],r[1]))}function a(r,t){function a(r,a){if(!i.stabTile(t,r)){for(var e=0;e<h.length;++e)if(h[e][0]===t&&h[e][1]===r)return h[e];var s=[t,r];return a?h.unshift(s):h.push(s),u[s]||(u[s]=o.vertex(t,r)),s}return null}function e(r,t){for(var a=0;a<r.length;++a)for(var e=r[a],s=0;s<t.length;++s){var n=t[s];i.stabBox(e[0],e[1],n[0],n[1])||g.push([e,n])}}for(var s=[],n=[],h=[],f=0;f<r.length;++f)r[f][0]<t?s.push(r[f]):r[f][0]>t?n.push(r[f]):h.push(r[f]);var c=r[0][1],l=r[r.length-1][1],p=a(c,!0),d=a(l,!1);for(e(s,n),e(h,s),e(h,n),f=1;f<h.length;++f){var y=h[f-1],v=h[f];i.stabBox(y[0],y[1],v[0],v[1])||g.push([y,v])}return{left:s,right:n,on:h,steiner0:p,steiner1:d,y0:c,y1:l}}function n(r,s,f){if(0===r.length)return null;if(r.length<l)return function(r,t,a){for(var e=[],s=0;s<r.length;++s){var n=r[s],h=o.vertex(n[0],n[1]);e.push(h),u[n]=h;for(var f=0;f<s;++f){var c=r[f];i.stabBox(n[0],n[1],c[0],c[1])||g.push([n,c])}}return new function(r){this.verts=r,this.leaf=!0}(e)}(r);for(var c=r[r.length>>>1][0],d=function(r,t,a,e){for(var s=[],n=[],i=[],o=0;o<t.length;++o){var u=t[o];a.stabRay(u[0],u[1],r)||i.push(u),u[0]<r?s.push(u):u[0]>r&&n.push(u)}i.sort(h);var f=[],c=[];for(o=0;o<i.length;){for(var l=r,p=r,g=i[o][1];o<i.length&&i[o][1]===g&&i[o][0]<r;)l=i[o++][0];for(l<r&&f.push([l,g]);o<i.length&&i[o][1]===g&&i[o][0]===r;)c.push(i[o]),f.push(i[o]),++o;if(o<i.length&&i[o][1]===g)for(p=i[o++][0];o<i.length&&i[o][1]===g;)++o;p>r&&f.push([p,g])}return{x:r,left:s,right:n,on:c,vis:f}}(c,r,i),y=n(d.left,s,c),v=n(d.right,c,f),b=0;b<d.on.length;++b)u[d.on[b]]=o.vertex(d.on[b][0],d.on[b][1]);var _=d.vis,m=[],w=null;for(b=0;b<_.length;){for(var j=b,x=Math.min(b+p-1,_.length-1);++x<_.length&&_[x-1][1]===_[x][1];);b=x;var V=a(_.slice(j,x),c);w&&V.steiner0&&!i.stabBox(w[0],w[1],V.steiner0[0],V.steiner0[1])&&g.push([w,V.steiner0]),w=V.steiner1,m.push(new e(V.y0,V.y1,t(V.steiner0),t(V.steiner1),V.left.map(t),V.right.map(t),V.on.map(t)))}return new function(r,t,a,e){this.x=r,this.buckets=t,this.left=a,this.right=e}(c,m,y,v)}for(var i=f(r),o=new c,u={},g=[],d=n(i.corners,-1/0,1/0),y=0;y<g.length;++y)o.link(u[g[y][0]],u[g[y][1]]);return o.init(),new s(i,o,d)};s.prototype.search=function(r,t,a,e,s){var n=this.geometry;if(r===a&&t===e)return n.stabBox(r,t,a,e)?1/0:(s&&s.push(a,e),0);if(!n.stabBox(r,t,a,e))return s&&(a!==r&&e!==t?s.push(r,t,a,t,a,e):s.push(r,t,a,e)),Math.abs(r-a)+Math.abs(t-e);var i=this.graph;i.setSourceAndTarget(a,e,r,t),o(n,i,this.root,!0,r,t),o(n,i,this.root,!1,a,e);var h=i.search();return s&&h<1/0&&i.getPath(s),h}},{"./geometry":8,"./graph":9,"binary-search-bounds":1}],11:[function(r,t,a){"use strict";function e(r,t){this.x=r,this.y=t,this.heuristic=.25,this.weight=.25,this.left=null,this.right=null,this.parent=null,this.state=0,this.pred=null,this.nextFree=null,this.edges=[],this.landmark=i.slice(),this.component=0}function s(r,t){var a=r.left;return t.right=a,a.parent=t,t.parent=r,r.left=t,r.right=o,r}function n(r,t){return r===o?t:t===o?r:r.weight<t.weight?s(r,t):s(t,r)}var i=function(){for(var r=new Array(16),t=0;t<16;++t)r[t]=1/0;return r}(),o=new e(1/0,1/0);o.weight=-1/0,o.left=o.right=o.parent=o,a.create=function(r,t){var a=new e(r,t);return a.left=a.right=a.parent=o,a},a.link=function(r,t){r.edges.push(t),t.edges.push(r)},a.insert=function(r,t){return t.nextFree?r:(t.nextFree=r,t)},a.clear=function(r){for(;r;){var t=r.nextFree;r.state=0,r.left=r.right=r.parent=o,r.nextFree=null,r=t}},a.NIL=o,a.push=function(r,t){if(r===o)return t;if(r.weight<t.weight){var a=r.left;return t.right=a,a.parent=t,t.parent=r,r.left=t,r}return a=t.left,r.right=a,a.parent=r,r.parent=t,t.left=r,t},a.pop=function(r){var t=r.left;for(r.left=o,r=t;;){var a=r.right;if(a===o)break;t=r;var e=a.right,s=n(t,a);for(r=s;t=e,(a=e.right)!==o;)e=a.right,s=s.right=n(t,a);s.right=o,t!==o&&(t.right=r,r=t)}return r.parent=o,r},a.decreaseKey=function(r,t){var a=t.parent;if(a.weight<t.weight)return r;var e=t.right;if(e.parent=a,a.left===t?a.left=e:a.right=e,r.weight<=t.weight)return(s=r.left).parent=t,t.right=s,r.left=t,t.parent=r,r;var s=t.left;return r.right=s,s.parent=r,t.left=r,r.parent=t,t.right=t.parent=o,t},a.NUM_LANDMARKS=16,a.LANDMARK_DIST=i},{}],12:[function(r,t,a){"use strict";function e(r){if(!r)return i;for(var t=0;t<r.args.length;++t){var a=r.args[t];r.args[t]=0===t?{name:a,lvalue:!0,rvalue:!!r.rvalue,count:r.count||1}:{name:a,lvalue:!1,rvalue:!0,count:1}}return r.thisVars||(r.thisVars=[]),r.localVars||(r.localVars=[]),r}function s(r){for(var t=[],a=0;a<r.args.length;++a)t.push("a"+a);return new Function("P",["return function ",r.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(r){return n({args:r.args,pre:e(r.pre),body:e(r.body),post:e(r.proc),funcName:r.funcName})}(r))}var n=r("cwise-compiler"),i={body:"",args:[],thisVars:[],localVars:[]},o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var r in o){var t=o[r];a[r]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:r}),a[r+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:r+"eq"}),a[r+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:r+"s"}),a[r+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:r+"seq"})}}();var h={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var r in h){var t=h[r];a[r]=s({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:r}),a[r+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:r+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var r in u){var t=u[r];a[r]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:r}),a[r+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:r+"s"}),a[r+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:r+"eq"}),a[r+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:r+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var r=0;r<f.length;++r){var t=f[r];a[t]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),a[t+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var c=["max","min","atan2","pow"];!function(){for(var r=0;r<c.length;++r){var t=c[r];a[t]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),a[t+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),a[t+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),a[t+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var l=["atan2","pow"];!function(){for(var r=0;r<l.length;++r){var t=l[r];a[t+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),a[t+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),a[t+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),a[t+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),a.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),a.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),a.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),a.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),a.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),a.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),a.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),a.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),a.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),a.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),a.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),a.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),a.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),a.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),a.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),a.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":3}],13:[function(r,t,a){"use strict";function e(r,t,a){if(0===a){for(var f=[[]],c=0;c<t.length;++c)if(!t[c])for(var l=f.length,p=0;p<l;++p){(d=f[p].slice()).push(i+c),f.push(d)}if(1===f.length)return"";var g=[];"generic"===r?g.push(n,".set(",h,",",n,".get(",h,")+"):g.push(n,"[",h,"]+=");for(c=1;c<f.length;++c){var d,y=((d=f[c]).length+1)%2;c>1&&!y?g.push("+"):y&&g.push("-"),"generic"===r?g.push(n,".get("):g.push(n,"["),g.push(h,"-",d.join("-")),"generic"===r?g.push(")"):g.push("]")}return"generic"===r?g.push(");"):g.push(";"),g.join("")}t[a-1]=!0;var v=[e(r,t,a-1),h,"+=",o,a-1,";for(",u,a-1,"=1;",u,a-1,"<",s,a-1,";++",u,a-1,"){"];return t[a-1]=!1,v.push(e(r,t,a-1),h,"+=",o,a-1,";}"),v.join("")}var s="n",n="d",i="s",o="p",h="o",u="i";t.exports=function(r){var t=r.dtype+r.order.join(),a=f[t];return a||(a=f[t]=function(r,t){for(var a=["prefixSum",t.length,"d",r,"s",t.join("s")].join(""),f=["function ",a,"(arr){var ",n,"=arr.data,",s,"=arr.shape,",i,"=arr.stride,",h,"=arr.offset,"],c=t.length,l=0;l<c;++l)f.push(s,l,"=",s,"[",t[l],"],");for(l=0;l<c;++l)f.push(i,l,"=",i,"[",t[l],"],");for(l=0;l<c;++l)f.push(u,l,"=0,");for(l=c-1;l>0;--l)f.push(o,l,"=",i,l,"-",s,l-1,"*",i,l-1,",");f.push(o,"0=",i,0,";");var p=new Array(c);for(l=0;l<c;++l)p[l]=!0;return f.push(e(r,p,c),"}return ",a),new Function(f.join(""))()}(r.dtype,r.order)),a(r),r};var f={}},{}],14:[function(r,t,a){function e(r,t){return r[0]-t[0]}function s(){var r,t=this.stride,a=new Array(t.length);for(r=0;r<a.length;++r)a[r]=[Math.abs(t[r]),r];a.sort(e);var s=new Array(a.length);for(r=0;r<s.length;++r)s[r]=a[r][1];return s}function n(r,t){var a=["View",t,"d",r].join("");t<0&&(a="View_Nil"+r);var e="generic"===r;if(-1===t){var n="function "+a+"(a){this.data=a;};var proto="+a+".prototype;proto.dtype='"+r+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+a+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+a+"(a){return new "+a+"(a);}";return new Function(n)()}if(0===t){n="function "+a+"(a,d) {this.data = a;this.offset = d};var proto="+a+".prototype;proto.dtype='"+r+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+a+"_copy() {return new "+a+"(this.data,this.offset)};proto.pick=function "+a+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+a+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+a+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+a+"(a,b,c,d){return new "+a+"(a,d)}";return new Function("TrivialArray",n)(u[r][0])}n=["'use strict'"];var o=i(t),h=o.map(function(r){return"i"+r}),f="this.offset+"+o.map(function(r){return"this.stride["+r+"]*i"+r}).join("+"),c=o.map(function(r){return"b"+r}).join(","),l=o.map(function(r){return"c"+r}).join(",");n.push("function "+a+"(a,"+c+","+l+",d){this.data=a","this.shape=["+c+"]","this.stride=["+l+"]","this.offset=d|0}","var proto="+a+".prototype","proto.dtype='"+r+"'","proto.dimension="+t),n.push("Object.defineProperty(proto,'size',{get:function "+a+"_size(){return "+o.map(function(r){return"this.shape["+r+"]"}).join("*"),"}})"),1===t?n.push("proto.order=[0]"):(n.push("Object.defineProperty(proto,'order',{get:"),t<4?(n.push("function "+a+"_order(){"),2===t?n.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&n.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):n.push("ORDER})")),n.push("proto.set=function "+a+"_set("+h.join(",")+",v){"),e?n.push("return this.data.set("+f+",v)}"):n.push("return this.data["+f+"]=v}"),n.push("proto.get=function "+a+"_get("+h.join(",")+"){"),e?n.push("return this.data.get("+f+")}"):n.push("return this.data["+f+"]}"),n.push("proto.index=function "+a+"_index(",h.join(),"){return "+f+"}"),n.push("proto.hi=function "+a+"_hi("+h.join(",")+"){return new "+a+"(this.data,"+o.map(function(r){return["(typeof i",r,"!=='number'||i",r,"<0)?this.shape[",r,"]:i",r,"|0"].join("")}).join(",")+","+o.map(function(r){return"this.stride["+r+"]"}).join(",")+",this.offset)}");var p=o.map(function(r){return"a"+r+"=this.shape["+r+"]"}),g=o.map(function(r){return"c"+r+"=this.stride["+r+"]"});n.push("proto.lo=function "+a+"_lo("+h.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+g.join(","));for(var d=0;d<t;++d)n.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");n.push("return new "+a+"(this.data,"+o.map(function(r){return"a"+r}).join(",")+","+o.map(function(r){return"c"+r}).join(",")+",b)}"),n.push("proto.step=function "+a+"_step("+h.join(",")+"){var "+o.map(function(r){return"a"+r+"=this.shape["+r+"]"}).join(",")+","+o.map(function(r){return"b"+r+"=this.stride["+r+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(d=0;d<t;++d)n.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");n.push("return new "+a+"(this.data,"+o.map(function(r){return"a"+r}).join(",")+","+o.map(function(r){return"b"+r}).join(",")+",c)}");var y=new Array(t),v=new Array(t);for(d=0;d<t;++d)y[d]="a[i"+d+"]",v[d]="b[i"+d+"]";n.push("proto.transpose=function "+a+"_transpose("+h+"){"+h.map(function(r,t){return r+"=("+r+"===undefined?"+t+":"+r+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+a+"(this.data,"+y.join(",")+","+v.join(",")+",this.offset)}"),n.push("proto.pick=function "+a+"_pick("+h+"){var a=[],b=[],c=this.offset");for(d=0;d<t;++d)n.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");n.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),n.push("return function construct_"+a+"(data,shape,stride,offset){return new "+a+"(data,"+o.map(function(r){return"shape["+r+"]"}).join(",")+","+o.map(function(r){return"stride["+r+"]"}).join(",")+",offset)}");return new Function("CTOR_LIST","ORDER",n.join("\n"))(u[r],s)}var i=r("iota-array"),o=r("is-buffer"),h="undefined"!=typeof Float64Array,u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(r,t,a,e){if(void 0===r)return(0,u.array[0])([]);"number"==typeof r&&(r=[r]),void 0===t&&(t=[r.length]);var s=t.length;if(void 0===a){a=new Array(s);for(var i=s-1,f=1;i>=0;--i)a[i]=f,f*=t[i]}if(void 0===e)for(e=0,i=0;i<s;++i)a[i]<0&&(e-=(t[i]-1)*a[i]);for(var c=function(r){if(o(r))return"buffer";if(h)switch(Object.prototype.toString.call(r)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(r)?"array":"generic"}(r),l=u[c];l.length<=s+1;)l.push(n(c,l.length-1));return(0,l[s+1])(r,t,a,e)}},{"iota-array":6,"is-buffer":7}],15:[function(r,t,a){"use strict";function e(r,t){for(var a=new Array(r.length-1),e=1;e<r.length;++e)for(var s=a[e-1]=new Array(r.length-1),n=0,i=0;n<r.length;++n)n!==t&&(s[i++]=r[e][n]);return a}function s(r){return 1&r?"-":""}function n(r){if(1===r.length)return r[0];if(2===r.length)return["sum(",r[0],",",r[1],")"].join("");var t=r.length>>1;return["sum(",n(r.slice(0,t)),",",n(r.slice(t)),")"].join("")}function i(r){if(2===r.length)return[["sum(prod(",r[0][0],",",r[1][1],"),prod(-",r[0][1],",",r[1][0],"))"].join("")];for(var t=[],a=0;a<r.length;++a)t.push(["scale(",n(i(e(r,a))),",",s(a),r[0][a],")"].join(""));return t}function o(r){for(var t=[],a=[],s=function(r){for(var t=new Array(r),a=0;a<r;++a){t[a]=new Array(r);for(var e=0;e<r;++e)t[a][e]=["m",e,"[",r-a-1,"]"].join("")}return t}(r),o=[],l=0;l<r;++l)0==(1&l)?t.push.apply(t,i(e(s,l))):a.push.apply(a,i(e(s,l))),o.push("m"+l);var p=n(t),g=n(a),d="orientation"+r+"Exact",y=["function ",d,"(",o.join(),"){var p=",p,",n=",g,",d=sub(p,n);return d[d.length-1];};return ",d].join("");return new Function("sum","prod","scale","sub",y)(u,h,f,c)}var h=r("two-product"),u=r("robust-sum"),f=r("robust-scale"),c=r("robust-subtract"),l=5,p=o(3),g=o(4),d=[function(){return 0},function(){return 0},function(r,t){return t[0]-r[0]},function(r,t,a){var e,s=(r[1]-a[1])*(t[0]-a[0]),n=(r[0]-a[0])*(t[1]-a[1]),i=s-n;if(s>0){if(n<=0)return i;e=s+n}else{if(!(s<0))return i;if(n>=0)return i;e=-(s+n)}var o=3.3306690738754716e-16*e;return i>=o||i<=-o?i:p(r,t,a)},function(r,t,a,e){var s=r[0]-e[0],n=t[0]-e[0],i=a[0]-e[0],o=r[1]-e[1],h=t[1]-e[1],u=a[1]-e[1],f=r[2]-e[2],c=t[2]-e[2],l=a[2]-e[2],p=n*u,d=i*h,y=i*o,v=s*u,b=s*h,_=n*o,m=f*(p-d)+c*(y-v)+l*(b-_),w=7.771561172376103e-16*((Math.abs(p)+Math.abs(d))*Math.abs(f)+(Math.abs(y)+Math.abs(v))*Math.abs(c)+(Math.abs(b)+Math.abs(_))*Math.abs(l));return m>w||-m>w?m:g(r,t,a,e)}];!function(){for(;d.length<=l;)d.push(o(d.length));for(var r=[],a=["slow"],e=0;e<=l;++e)r.push("a"+e),a.push("o"+e);var s=["function getOrientation(",r.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(e=2;e<=l;++e)s.push("case ",e,":return o",e,"(",r.slice(0,e).join(),");");s.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),a.push(s.join(""));var n=Function.apply(void 0,a);for(t.exports=n.apply(void 0,[function(r){var t=d[r.length];return t||(t=d[r.length]=o(r.length)),t.apply(void 0,r)}].concat(d)),e=0;e<=l;++e)t.exports[e]=d[e]}()},{"robust-scale":16,"robust-subtract":17,"robust-sum":18,"two-product":19}],16:[function(r,t,a){"use strict";var e=r("two-product"),s=r("two-sum");t.exports=function(r,t){var a=r.length;if(1===a){var n=e(r[0],t);return n[0]?n:[n[1]]}var i=new Array(2*a),o=[.1,.1],h=[.1,.1],u=0;e(r[0],t,o),o[0]&&(i[u++]=o[0]);for(var f=1;f<a;++f){e(r[f],t,h);var c=o[1];s(c,h[0],o),o[0]&&(i[u++]=o[0]);var l=h[1],p=o[1],g=l+p,d=p-(g-l);o[1]=g,d&&(i[u++]=d)}return o[1]&&(i[u++]=o[1]),0===u&&(i[u++]=0),i.length=u,i}},{"two-product":19,"two-sum":20}],17:[function(r,t,a){"use strict";t.exports=function(r,t){var a=0|r.length,e=0|t.length;if(1===a&&1===e)return function(r,t){var a=r+t,e=a-r,s=r-(a-e)+(t-e);return s?[s,a]:[a]}(r[0],-t[0]);var s,n,i=a+e,o=new Array(i),h=0,u=0,f=0,c=Math.abs,l=r[u],p=c(l),g=-t[f],d=c(g);p<d?(n=l,(u+=1)<a&&(p=c(l=r[u]))):(n=g,(f+=1)<e&&(d=c(g=-t[f]))),u<a&&p<d||f>=e?(s=l,(u+=1)<a&&(p=c(l=r[u]))):(s=g,(f+=1)<e&&(d=c(g=-t[f])));for(var y,v,b=s+n,_=b-s,m=n-_,w=m,j=b;u<a&&f<e;)p<d?(s=l,(u+=1)<a&&(p=c(l=r[u]))):(s=g,(f+=1)<e&&(d=c(g=-t[f]))),(m=(n=w)-(_=(b=s+n)-s))&&(o[h++]=m),w=j-((y=j+b)-(v=y-j))+(b-v),j=y;for(;u<a;)(m=(n=w)-(_=(b=(s=l)+n)-s))&&(o[h++]=m),w=j-((y=j+b)-(v=y-j))+(b-v),j=y,(u+=1)<a&&(l=r[u]);for(;f<e;)(m=(n=w)-(_=(b=(s=g)+n)-s))&&(o[h++]=m),w=j-((y=j+b)-(v=y-j))+(b-v),j=y,(f+=1)<e&&(g=-t[f]);return w&&(o[h++]=w),j&&(o[h++]=j),h||(o[h++]=0),o.length=h,o}},{}],18:[function(r,t,a){"use strict";t.exports=function(r,t){var a=0|r.length,e=0|t.length;if(1===a&&1===e)return function(r,t){var a=r+t,e=a-r,s=r-(a-e)+(t-e);return s?[s,a]:[a]}(r[0],t[0]);var s,n,i=a+e,o=new Array(i),h=0,u=0,f=0,c=Math.abs,l=r[u],p=c(l),g=t[f],d=c(g);p<d?(n=l,(u+=1)<a&&(p=c(l=r[u]))):(n=g,(f+=1)<e&&(d=c(g=t[f]))),u<a&&p<d||f>=e?(s=l,(u+=1)<a&&(p=c(l=r[u]))):(s=g,(f+=1)<e&&(d=c(g=t[f])));for(var y,v,b=s+n,_=b-s,m=n-_,w=m,j=b;u<a&&f<e;)p<d?(s=l,(u+=1)<a&&(p=c(l=r[u]))):(s=g,(f+=1)<e&&(d=c(g=t[f]))),(m=(n=w)-(_=(b=s+n)-s))&&(o[h++]=m),w=j-((y=j+b)-(v=y-j))+(b-v),j=y;for(;u<a;)(m=(n=w)-(_=(b=(s=l)+n)-s))&&(o[h++]=m),w=j-((y=j+b)-(v=y-j))+(b-v),j=y,(u+=1)<a&&(l=r[u]);for(;f<e;)(m=(n=w)-(_=(b=(s=g)+n)-s))&&(o[h++]=m),w=j-((y=j+b)-(v=y-j))+(b-v),j=y,(f+=1)<e&&(g=t[f]);return w&&(o[h++]=w),j&&(o[h++]=j),h||(o[h++]=0),o.length=h,o}},{}],19:[function(r,t,a){"use strict";t.exports=function(r,t,a){var s=r*t,n=e*r,i=n-(n-r),o=r-i,h=e*t,u=h-(h-t),f=t-u,c=o*f-(s-i*u-o*u-i*f);return a?(a[0]=c,a[1]=s,a):[c,s]};var e=+(Math.pow(2,27)+1)},{}],20:[function(r,t,a){"use strict";t.exports=function(r,t,a){var e=r+t,s=e-r,n=t-s,i=r-(e-s);return a?(a[0]=i+n,a[1]=e,a):[i+n,e]}},{}],21:[function(r,t,a){"use strict";t.exports=function(r,t,a){return 0===r.length?r:t?(a||r.sort(t),function(r,t){for(var a=1,e=r.length,s=r[0],n=r[0],i=1;i<e;++i)if(n=s,s=r[i],t(s,n)){if(i===a){a++;continue}r[a++]=s}return r.length=a,r}(r,t)):(a||r.sort(),function(r){for(var t=1,a=r.length,e=r[0],s=r[0],n=1;n<a;++n,s=e)if(s=e,(e=r[n])!==s){if(n===t){t++;continue}r[t++]=e}return r.length=t,r}(r))}},{}],22:[function(r,t,a){ndarray=r("ndarray"),createPlanner=r("l1-path-finder")},{"l1-path-finder":10,ndarray:14}]},{},[22]);var ndarray,createPlanner;export default {initializePlanner};