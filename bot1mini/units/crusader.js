import {BCAbstractRobot, SPECS} from 'battlecode';import search from '../search.js';import base from '../base.js';import qmath from '../math.js';import signal from '../signals.js';import pathing from '../pathing/pathing-bundled.js';function mind(t){var e=t.map,a=(t.me.team+1)%2,s="",r=t.getVisibleRobotMap(),n=t.getFuelMap(),i=e.length,l=t.getKarboniteMap();if(1===t.me.turn){t.castleTalk(t.me.unit),t.mapIsHorizontal=search.horizontalSymmetry(e),t.useRallyTargetToMakeLattice=!0,t.defendLocChosen=!1;if(t.initializeCastleLocations()){var o=t.knownStructures[a][0];t.status="defend",t.oldStatus="defend";var u=base.relToPos(t.me.x,t.me.y,o[0],o[1],t);t.finalTarget=[t.me.x+u.dx,t.me.y+u.dy],t.defendTarget=[t.me.x,t.me.y]}else t.status="defend",t.oldStatus="defend",t.defendTarget=[t.me.x,t.me.y],t.finalTarget=[t.me.x,t.me.y];t.origStructureLoc=[t.me.x,t.me.y];for(var d=search.circle(t,t.me.x,t.me.y,2),f=0;f<d.length;f++){var g=d[f],m=r[g[1]][g[0]];if(null!==(A=t.getRobot(m))&&A.team===t.me.team&&(A.unit===SPECS.CASTLE||A.unit===SPECS.CHURCH)){t.origStructureLoc=g;break}}t.enemyDirection=t.determineEnemyDirection()}5===t.me.turn&&(pathing.initializePlanner(t),t.setFinalTarget(t.finalTarget));var c=t.getVisibleRobots(),y={0:[],1:[],2:[],3:[],4:[],5:[],6:[]};for(f=0;f<c.length;f++){var T=c[f].signal;if(signal.processMessageCrusader(t,T),c[f].team===t.me.team){if(T>=12294&&T<=16389){"attackTarget"!==t.status&&(t.oldStatus=t.status),t.status="attackTarget";var S=12294,x=t.getLocation(T-S);t.finalTarget=[x.x,x.y]}if(T>=16392&&T<=20487){"goToTarget"!==t.status&&(t.oldStatus=t.status),t.status="goToTarget";S=16392,x=t.getLocation(T-S);t.finalTarget=[x.x,x.y]}if(T>=20488&&T<=24583){"goToTarget"!==t.status&&(t.oldStatus=t.status),t.status="goToTarget";S=20488,x=t.getLocation(T-S);t.finalTarget=[x.x,x.y],base.logStructure(t,t.finalTarget[0],t.finalTarget[1],a,0)}else if(T>=29003&&T<=33098&&"rally"!==t.status){"rally"!==t.status&&(t.oldStatus=t.status),t.status="rally";S=29003,x=t.getLocation(T-S);t.finalTarget=[x.x,x.y],t.rallyTarget=t.finalTarget}else if(T>=33099&&T<=37194){S=33099;var L=t.getLocation(T-S);base.logStructure(t,L.x,L.y,a,0);var h=L.x,k=L.y;t.mapIsHorizontal?k=i-k-1:h=i-h-1,base.logStructure(t,h,k,t.me.team,0),t.enemyDirection=t.determineEnemyDirection(h,k)}}else if(T>=41292&&T<=45387){"attackTarget"!==t.status&&(t.oldStatus=t.status),t.status="attackTarget";S=41292,x=t.getLocation(T-S);t.finalTarget=[x.x,x.y]}c[f].unit===SPECS.CHURCH&&y[6].push(c[f])}if("searchAndAttack"===t.status&&(32,32),base.updateKnownStructures(t),"rally"!==t.status&&(t.useRallyTargetToMakeLattice=!0),"defend"===t.status||"defendOldPos"===t.status||"defendSpot"===t.status||"rally"===t.status){var C=search.findNearestStructure(t),v=qmath.dist(t.me.x,t.me.y,C.x,C.y);if(r[t.finalTarget[1]][t.finalTarget[0]]>0&&r[t.finalTarget[1]][t.finalTarget[0]]!==t.me.id&&(t.defendLocChosen=!1),t.me.x%2==1&&t.me.y%2==1||t.me.x%2==0&&t.me.y%2==0||!0===n[t.me.y][t.me.x]||!0===l[t.me.y][t.me.x]||v<=2||"defendOldPos"===t.status){var D=null;!1===t.defendLocChosen&&("left"===t.enemyDirection?D="rally"===t.status?t.findDefendLoc(t,y,t.rallyTarget[0],i,0,i):t.findDefendLoc(t,y,0,t.defendTarget[0],0,i):"right"===t.enemyDirection?D="rally"===t.status?t.findDefendLoc(t,y,0,t.rallyTarget[0],0,i):t.findDefendLoc(t,y,t.defendTarget[0],i,0,i):"up"===t.enemyDirection?D="rally"===t.status?t.findDefendLoc(t,y,0,i,t.rallyTarget[1],i):t.findDefendLoc(t,y,0,i,0,t.defendTarget[1]):"down"===t.enemyDirection&&(D="rally"===t.status?t.findDefendLoc(t,y,0,i,0,t.rallyTarget[1]):t.findDefendLoc(t,y,0,i,t.defendTarget[1],i)),t.defendLocChosen=!0),null!==D&&(t.finalTarget=D),"defendOldPos"===t.status&&(t.status="defend")}}if("searchAndAttack"===t.status&&(t.knownStructures[a].length?t.finalTarget=[t.knownStructures[a][0].x,t.knownStructures[a][0].y]:t.status="defend"),"searchAndAttack"===t.status||"rally"===t.status||"defend"===t.status||"attackTarget"===t.status||"goToTarget"===t.status||"rally"===t.status){var b=99999999,p=!1,P=null;for(f=0;f<c.length;f++){var A;if((A=c[f]).team!==t.me.team){A.unit===SPECS.CASTLE||(A.unit,SPECS.CHURCH);var E=qmath.dist(t.me.x,t.me.y,A.x,A.y);E<b&&(b=E,p=!0,P=A)}}if(null!==P&&"goToTarget"===t.status&&(t.finalTarget=[P.x,P.y]),b<=16&&!0===p){u=base.rel(t.me.x,t.me.y,P.x,P.y);if(t.readyAttack())return s=t.attack(u.dx,u.dy),{action:s}}if(!0===t.destroyedCastle){t.destroyedCastle=!1;t.knownStructures[t.me.team][0].x,t.knownStructures[t.me.team][0].y;t.status="defend"}}if("attackTarget"===t.status)qmath.dist(t.me.x,t.me.y,t.finalTarget[0],t.finalTarget[1]);t.status;var w=!0;return"rally"===t.status&&(w=!1),s=t.navigate(t.finalTarget,!1,w),{action:s}}function invert(t,e){}export default {mind};