import qmath from 'math.js';import search from 'search.js';function rel(t,n,u,e){return{dx:u-t,dy:e-n}}function relToPos(t,n,u,e,r,o=false,l=true){rel(t,n,u,e);var a=unitMoveDeltas[r.me.unit];!1===l&&(a=unitMoveDeltas[r.me.unit].slice(0,9));for(var s=r.getVisibleRobotMap(),i=qmath.dist(u,e,t,n),c=[0,0],v=0;v<a.length;v++){var f=t+a[v][0],k=n+a[v][1];if(!0===r.canMove(a[v][0],a[v][1])){var S=!0;if(o)for(var d=search.circle(r,f,k,2),h=1;h<d.length;h++){var m=d[h],y=r.getRobot(s[m[1]][m[0]]);null!==y&&y.team===r.me.team&&y.id!==r.me.id&&(S=!1)}if(S){var w=qmath.dist(f,k,u,e);w<i&&(i=w,c=a[v])}}}return{dx:c[0],dy:c[1]}}function logStructureBot(t,n){for(var u=n.team,e=0;e<t.knownStructures[u];e++){var r=t.knownStructures[u][e];if(n.x===r.x&&n.y===r.y){exist=!0;break}}t.knownStructures[n.team].push({x:n.x,y:n.y,unit:n.unit})}function logStructure(t,n,u,e,r,o=true){for(var l=!1,a=0;a<t.knownStructures[e].length;a++){var s=t.knownStructures[e][a];if(n===s.x&&u===s.y){l=!0;break}}!1===l&&(!0===o?t.knownStructures[e].push({x:n,y:u,unit:r}):t.knownStructures[e].unshift({x:n,y:u,unit:r}))}function updateKnownStructures(t){for(var n=t.getVisibleRobotMap(),u=0;u<2;u++){for(var e=[],r=0;r<t.knownStructures[u].length;r++){var o=t.knownStructures[u][r],l=n[o.y][o.x],a=t.getRobot(l);null===a?e.push(o):a.unit===o.unit?e.push(o):u!==t.me.team&&(t.mapIsHorizontal?t.castleTalk(7+o.x):t.castleTalk(7+o.y),t.destroyedCastle=!0)}t.knownStructures[u]=e}for(var s=0;s<t.knownStructures[1].length;s++);}function destroyedCastle(t){}var unitMoveDeltas={0:null,1:null,2:[[0,0],[0,-1],[1,0],[0,1],[-1,0],[1,-1],[1,1],[-1,1],[-1,-1],[0,-2],[2,0],[0,2],[-2,0]],3:[[0,0],[0,-1],[1,0],[0,1],[-1,0],[1,-1],[1,1],[-1,1],[-1,-1],[0,-2],[2,0],[0,2],[-2,0],[1,-2],[1,2],[-1,2],[-1,-2],[2,-2],[2,2],[-2,2],[-2,-2],[0,-3],[3,0],[0,3],[-3,0]],4:[[0,0],[0,-1],[1,0],[0,1],[-1,0],[1,-1],[1,1],[-1,1],[-1,-1],[0,-2],[2,0],[0,2],[-2,0]],5:[[0,0],[0,-1],[1,0],[0,1],[-1,0],[1,-1],[1,1],[-1,1],[-1,-1],[0,-2],[2,0],[0,2],[-2,0]]},unitMoveFuelCosts={0:null,1:null,2:[0,1,1,1,1,2,2,2,2,4,4,4,4],3:[0,1,1,1,1,2,2,2,2,4,4,4,4,5,5,5,5,8,8,8,8,9,9,9,9],4:[0,2,2,2,2,4,4,4,4,8,8,8,8],5:[0,3,3,3,3,6,6,6,6,12,12,12,12]},unitAttackFuelCosts={0:null,1:null,2:null,3:10,4:25,5:15};export default {rel, relToPos, unitMoveDeltas, logStructure, updateKnownStructures, destroyedCastle};